<!doctype html>
<html lang="">
<head>
	<meta charset="UTF-8" />
	<title>Widget 示例-飞牛前端UED</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="nico 0.5.2" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">


	<script type="text/javascript">
		var ctx = '../../../';
	</script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
<link rel="stylesheet" href="../../../static/css/site.css" />
 <link rel="stylesheet" href="../../../static/css/fnx.min.css" />

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../../static/js/fnx.min.js"></script>


</head>


<body>
<header class="navbar navbar-default navbar-static-top doc-nav">
	<div class="container">
		<div class="navbar-header">
			<a href="../../../readme.html" class="logo"><i class="logo-icon"></i><span>FNX UI</span></a>

			<button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#fnx-navbar" aria-controls="fnx-navbar" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>

		<nav id="fnx-navbar" class="navbar-collapse collapse" aria-expanded="false">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="../../../readme.html">首页</a></li>
				<li><a href="../../../tutorial/readme.html">快速上手</a></li>
				<li><a href="../../readme.html">文档</a></li>
				<li><a href="https://github.com/Rockcookies/fnx">GITHUB</a></li>
			</ul>
		</nav>
	</div>
</header>

<div class="doc-header">
	<div class="container">
		<h1>Widget 示例</h1>
		<p>Widget 简单的 TabView。</p>
	</div>
</div>

<div class="doc-body">
	<div class="container">
		<div class="row">
			<div id="doc-nav" class="col-md-3 doc-sidebar hidden-sm hidden-xs" data-role="aside">
				<ul class="nav" data-spy="affix" data-offset-top="330"></ul>
			</div>

			<div id="doc-content" class="col-md-9 doc-content" data-role="main">
<style>
    #simple-tabs {
        width: 400px;
    }

    .exp1 .nav li {
        list-style: none;
        float: left;
        border: 1px solid #eee;
        padding: 5px 10px;
        border-bottom: none;
        cursor: pointer;
    }

    .exp1 .nav li.active {
        background: #eee;
    }

    .exp1 .content {
        clear: both;
        border: 1px solid #eee;
        height: 200px;
        width: 500px;
        overflow: hidden;
    }

    .exp1 .content div {
        height: 200px;
        padding: 20px;
    }

    #egg {
        padding: 5px 20px;
        margin: 10px 0;
    }
</style>

<h1 id="示例：简单的-tabview。">示例：简单的 TabView。<a href="#示例：简单的-tabview。" class="anchor">¶</a></h1><p>下面演示如何基于 Widget 来快速开发一个简单的 TabView 界面组件。</p>
<h2 id="html">HTML<a href="#html" class="anchor">¶</a></h2><div class="nico-insert-code"><div id="demo" class="exp1">
    <ul class="nav">
        <li>开放</li>
        <li>简单</li>
        <li>易用</li>
    </ul>
    <div class="content">
        <div>开源开放，海纳百川。</div>
        <div>如无必要，勿增实体。</div>
        <div>一目了然，容易学习。</div>
    </div>
</div>
<button id="egg">手贱</button></div><div class="highlight"><pre><code class="xml"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">id</span>=<span class="value">"demo"</span> <span class="attribute">class</span>=<span class="value">"exp1"</span>&gt;</span>
    <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"nav"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span>开放<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span>简单<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
        <span class="tag">&lt;<span class="title">li</span>&gt;</span>易用<span class="tag">&lt;/<span class="title">li</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
    <span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"content"</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span>&gt;</span>开源开放，海纳百川。<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span>&gt;</span>如无必要，勿增实体。<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
        <span class="tag">&lt;<span class="title">div</span>&gt;</span>一目了然，容易学习。<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
    <span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
<span class="tag">&lt;<span class="title">button</span> <span class="attribute">id</span>=<span class="value">"egg"</span>&gt;</span>手贱<span class="tag">&lt;/<span class="title">button</span>&gt;</span></code></pre></div><h2 id="js">JS<a href="#js" class="anchor">¶</a></h2><script>
var Widget = FNX.include('widget/widget');

// 基于 Widget 定义 SimpleTabView 组件
var SimpleTabView = Widget.extend({

    attrs: {
        triggers: {
            value: '.nav li',
            getter: function(val) {
                return this.$(val);
            },
            readOnly: true
        },

        panels: {
            value: '.content div',
            getter: function(val) {
                return this.$(val);
            },
            readOnly: true
        },

        activeIndex: {
            value: 0
        }
    },

    events: {
        'click .nav li': '_switchToEventHandler'
    },

    _onRenderActiveIndex: function(val, prev) {
        var triggers = this.get('triggers');
        var panels = this.get('panels');

        triggers.eq(prev).removeClass('active');
        triggers.eq(val).addClass('active');

        panels.eq(prev).hide();
        panels.eq(val).show();
    },

    _switchToEventHandler: function(ev) {
        var index = this.get('triggers').index(ev.target);
        this.switchTo(index);
    },

    switchTo: function(index) {
        this.set('activeIndex', index);
    },

    setup: function() {
        this.get('panels').hide();
        this.switchTo(this.get('activeIndex'))
    },

    add: function(title, content) {
        var li = $('<li>' + title + '</li>');
        var div = $('<div>' + content + '</div>');

        li.appendTo(this.get('triggers')[0].parentNode);
        div.appendTo(this.get('panels')[0].parentNode);

        return this;
    },

    setActiveContent: function(content) {
        this.get('panels').eq(this.get('activeIndex')).html(content);
    },

    size: function() {
        return this.get('triggers').length;
    }
});


var tabView = new SimpleTabView({
    element: '#demo',
    activeIndex: 0
}).render();


// 彩蛋：增加一点小趣味
var counter = 1;

$('#egg').on('click', function() {
    if (counter < 4) {
        tabView.add('哈哈', '你居然点击了 ' + counter++ + ' 次')
                .switchTo(tabView.size() - 1);
    }
    else if (counter++ === 4) {
        tabView.setActiveContent('囧，你居然还点击，手真贱呀');
    }
    else {
        tabView.element.replaceWith('悄悄的我走了，带走了所有代码⋯⋯');
        $(this).remove();
    }
});</script><div class="highlight"><pre><code class="javascript">
<span class="keyword">var</span> Widget = FNX.include(<span class="string">'widget/widget'</span>);

<span class="comment">// 基于 Widget 定义 SimpleTabView 组件</span>
<span class="keyword">var</span> SimpleTabView = Widget.extend({

    attrs: {
        triggers: {
            value: <span class="string">'.nav li'</span>,
            getter: <span class="function"><span class="keyword">function</span><span class="params">(val)</span> {</span>
                <span class="keyword">return</span> <span class="keyword">this</span>.$(val);
            },
            readOnly: <span class="literal">true</span>
        },

        panels: {
            value: <span class="string">'.content div'</span>,
            getter: <span class="function"><span class="keyword">function</span><span class="params">(val)</span> {</span>
                <span class="keyword">return</span> <span class="keyword">this</span>.$(val);
            },
            readOnly: <span class="literal">true</span>
        },

        activeIndex: {
            value: <span class="number">0</span>
        }
    },

    events: {
        <span class="string">'click .nav li'</span>: <span class="string">'_switchToEventHandler'</span>
    },

    _onRenderActiveIndex: <span class="function"><span class="keyword">function</span><span class="params">(val, prev)</span> {</span>
        <span class="keyword">var</span> triggers = <span class="keyword">this</span>.get(<span class="string">'triggers'</span>);
        <span class="keyword">var</span> panels = <span class="keyword">this</span>.get(<span class="string">'panels'</span>);

        triggers.eq(prev).removeClass(<span class="string">'active'</span>);
        triggers.eq(val).addClass(<span class="string">'active'</span>);

        panels.eq(prev).hide();
        panels.eq(val).show();
    },

    _switchToEventHandler: <span class="function"><span class="keyword">function</span><span class="params">(ev)</span> {</span>
        <span class="keyword">var</span> index = <span class="keyword">this</span>.get(<span class="string">'triggers'</span>).index(ev.target);
        <span class="keyword">this</span>.switchTo(index);
    },

    switchTo: <span class="function"><span class="keyword">function</span><span class="params">(index)</span> {</span>
        <span class="keyword">this</span>.set(<span class="string">'activeIndex'</span>, index);
    },

    setup: <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
        <span class="keyword">this</span>.get(<span class="string">'panels'</span>).hide();
        <span class="keyword">this</span>.switchTo(<span class="keyword">this</span>.get(<span class="string">'activeIndex'</span>))
    },

    add: <span class="function"><span class="keyword">function</span><span class="params">(title, content)</span> {</span>
        <span class="keyword">var</span> li = $(<span class="string">'&lt;li&gt;'</span> + title + <span class="string">'&lt;/li&gt;'</span>);
        <span class="keyword">var</span> div = $(<span class="string">'&lt;div&gt;'</span> + content + <span class="string">'&lt;/div&gt;'</span>);

        li.appendTo(<span class="keyword">this</span>.get(<span class="string">'triggers'</span>)[<span class="number">0</span>].parentNode);
        div.appendTo(<span class="keyword">this</span>.get(<span class="string">'panels'</span>)[<span class="number">0</span>].parentNode);

        <span class="keyword">return</span> <span class="keyword">this</span>;
    },

    setActiveContent: <span class="function"><span class="keyword">function</span><span class="params">(content)</span> {</span>
        <span class="keyword">this</span>.get(<span class="string">'panels'</span>).eq(<span class="keyword">this</span>.get(<span class="string">'activeIndex'</span>)).html(content);
    },

    size: <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
        <span class="keyword">return</span> <span class="keyword">this</span>.get(<span class="string">'triggers'</span>).length;
    }
});


<span class="keyword">var</span> tabView = <span class="keyword">new</span> SimpleTabView({
    element: <span class="string">'#demo'</span>,
    activeIndex: <span class="number">0</span>
}).render();


<span class="comment">// 彩蛋：增加一点小趣味</span>
<span class="keyword">var</span> counter = <span class="number">1</span>;

$(<span class="string">'#egg'</span>).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> {</span>
    <span class="keyword">if</span> (counter &lt; <span class="number">4</span>) {
        tabView.add(<span class="string">'哈哈'</span>, <span class="string">'你居然点击了 '</span> + counter++ + <span class="string">' 次'</span>)
                .switchTo(tabView.size() - <span class="number">1</span>);
    }
    <span class="keyword">else</span> <span class="keyword">if</span> (counter++ === <span class="number">4</span>) {
        tabView.setActiveContent(<span class="string">'囧，你居然还点击，手真贱呀'</span>);
    }
    <span class="keyword">else</span> {
        tabView.element.replaceWith(<span class="string">'悄悄的我走了，带走了所有代码⋯⋯'</span>);
        $(<span class="keyword">this</span>).remove();
    }
});</code></pre></div>

			</div>
		</div>
	</div>
</div>





<footer class="doc-footer">
	<a href="../../../">飞牛武汉UED</a><br>愿景: 成为业界卓越的UED团队！
</footer>

<script type="text/javascript" src="../../../static/js/site.js"></script>


</body>

</html>